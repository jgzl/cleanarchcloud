spring:
  cloud:
    gateway:
      # 动态路由
      dynamic-route:
        type: redis
        enabled: true
      enabled: true
      discovery:
        locator:
          enabled: true
          lowerCaseServiceId: true
      routes:
        - id: upms
          uri: lb://cleanarch-infrastructure-upms
          predicates:
            - Path=/upms/**
        - id: upms-ws-info
          uri: lb://cleanarch-infrastructure-upms
          predicates:
            - Path=/upms/message/info/**
        - id: upms-ws
          uri: lb:ws://cleanarch-infrastructure-upms
          predicates:
            - Path=/upms/message/**
        - id: camunda
          uri: lb://cleanarch-infrastructure-camunda
          predicates:
            - Path=/camunda/**
        - id: tools
          uri: lb://cleanarch-infrastructure-tools
          predicates:
            - Path=/tools/**
        - id: demo
          uri: lb://cleanarch-business-demo
          predicates:
            - Path=/demo/**
        - id: ssoclient1
          uri: lb://cleanarch-business-ssoclient1
          predicates:
            - Path=/ssoclient1/**
        - id: ssoclient2
          uri: lb://cleanarch-business-ssoclient2
          predicates:
            - Path=/ssoclient2/**
      loadbalancer:
        use404: true
      httpclient:
        response-timeout: 300s
        pool:
          type: elastic
          max-idle-time: 30s
          max-connections: 1000
          acquire-timeout: 180000
    nacos:
      server-addr: localhost:8848
      config:
        namespace: business-dev
        file-extension: yaml
        shared-configs:
          - data-id: common.yaml
            group: DEFAULT_GROUP
            refresh: true
      discovery:
        namespace: business-dev
        server-addr: ${spring.cloud.nacos.server-addr}
#    sentinel:
#      transport:
#        dashboard: localhost:8888
#      scg:
#        fallback:
#          response-status: 426
#          response-body: "{'code':'426' , 'message':'请求频繁，请稍后重试'}"
#      datasource:
#        # 名称随意
#        gw-api:
#          nacos:
#            server-addr: ${spring.cloud.nacos.server-addr}
#            dataId: ${spring.application.name}-gateway-api-rules
#            groupId: SENTINEL_GROUP
#            namespace: sentinel-dev
#            rule-type: gw-api-group
#        gw-flow:
#          nacos:
#            server-addr: ${spring.cloud.nacos.server-addr}
#            dataId: ${spring.application.name}-gateway-flow-rules
#            groupId: SENTINEL_GROUP
#            namespace: sentinel-dev
#            rule-type: gw-flow
#      eager: true
#      filter:
#        enabled: false
  redis:
    host: 127.0.0.1
    password: 123456
  r2dbc:
    url: r2dbc:mysql://127.0.0.1:3306/cleanarch?sslMode=DISABLED
    username: root
    password: root
    pool:
      validation-query: SELECT 1
      enabled: true
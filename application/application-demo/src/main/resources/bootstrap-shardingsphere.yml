#读写分离加数据分片
server:
  port: 8020
spring:
  shardingsphere:
    datasource:
      names: demo,demo-slave,demo0,demo1,demo2,demo3,demo4,demo5,demo6,demo7,demo0-slave,demo1-slave,demo2-slave,demo3-slave,demo4-slave,demo5-slave,demo6-slave,demo7-slave
      demo:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo0:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo0?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo0-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo0?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo1:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo1?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo1-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo1?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo2:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo2?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo2-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo2?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo3:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo3?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo3-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo3?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo4:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo4?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo4-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo4?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo5:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo5?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo5-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo5?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo6:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo6?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo6-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo6?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo7:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.201:3306/demo7?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
      demo7-slave:
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbcUrl: jdbc:mysql://192.168.0.202:3306/demo7?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=GMT&allowPublicKeyRetrieval=true
        password: root
        type: com.zaxxer.hikari.HikariDataSource
        username: root
    props:
      executor:
        size: 4
      sql:
        show: true
    sharding:
      binding-tables: o_order,o_order_item
      broadcast-tables: o_dict
      default-data-source-name: demo
      default-database-strategy:
        inline:
          algorithm-expression: ds$->{shop_id % 8}
          sharding-column: shop_id
      master-slave-rules:
        ds0:
          master-data-source-name: demo0
          slave-data-source-names: demo0-slave
        ds1:
          master-data-source-name: demo1
          slave-data-source-names: demo1-slave
        ds2:
          master-data-source-name: demo2
          slave-data-source-names: demo2-slave
        ds3:
          master-data-source-name: demo3
          slave-data-source-names: demo3-slave
        ds4:
          master-data-source-name: demo4
          slave-data-source-names: demo4-slave
        ds5:
          master-data-source-name: demo5
          slave-data-source-names: demo5-slave
        ds6:
          master-data-source-name: demo6
          slave-data-source-names: demo6-slave
        ds7:
          master-data-source-name: demo7
          slave-data-source-names: demo7-slave
      tables:
        o_order:
          actual-data-nodes: ds$->{0..7}.o_order$->{0..1}
          key-generator:
            column: id
            type: SNOWFLAKE
          table-strategy:
            inline:
              algorithm-expression: o_order$->{id % 2}
              sharding-column: id
        o_order_item:
          actual-data-nodes: ds$->{0..7}.o_order_item$->{0..1}
          key-generator:
            column: id
            type: SNOWFLAKE
          table-strategy:
            inline:
              algorithm-expression: o_order_item$->{order_id % 2}
              sharding-column: order_id

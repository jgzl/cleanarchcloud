(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de3dc"],{"858a":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticStyle:{"margin-bottom":"18px","text-align":"right"}},[t("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"default",icon:"reload"},on:{click:e.refreshList}},[e._v("刷新")]),t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建")])],1),t("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,rowKey:function(e){return e.userId}},scopedSlots:e._u([{key:"avatar",fn:function(a){return t("span",{},[t("a",[e._v(e._s(a))])])}},{key:"action",fn:function(a,r){return t("span",{},[t("a",{on:{click:function(a){return e.handleEdit(r)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(a){return e.handleDelete(r)}}},[e._v("删除")])],1)}}])}),t("CreateUser",{ref:"CreateUser",on:{"on-refresh":e.refreshList}})],1)},s=[],n=t("2af9"),i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e._f("titleFilter")(e.isAdd),width:800,destroyOnClose:!0},on:{ok:e.handleOk},model:{value:e.visible,callback:function(a){e.visible=a},expression:"visible"}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"用户姓名",hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,max:32,message:"请输入用户名称,32以内"}]}],expression:"[\n          'username',\n          {rules: [{ required: true, max: 32, message: '请输入用户名称,32以内' }]\n          }]"}],attrs:{disabled:!e.isAdd}})],1),e.isAdd?t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"用户密码",hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,min:8,max:32,message:"请输入用户密码,8以上32以内"}]}],expression:"[\n          'password',\n          {rules: [{ required: true, min: 8,max: 32, message: '请输入用户密码,8以上32以内' }]\n          }]"}]})],1):e._e(),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"用户昵称",hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,max:64,message:"请输入用户别名,64以内"}]}],expression:"[\n          'nickname',\n          {rules: [{ required: true, max: 64, message: '请输入用户别名,64以内' }]\n          }]"}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"邮件",hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,max:64,message:"请输入邮件,64以内"}]}],expression:"[\n          'email',\n          {rules: [{ required: true, max: 64, message: '请输入邮件,64以内' }]\n          }]"}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"手机",hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,max:64,message:"请输入手机号,64以内"}]}],expression:"[\n          'mobile',\n          {rules: [{ required: true, max: 64, message: '请输入手机号,64以内' }]\n          }]"}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"头像",hasFeedback:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["avatar"],expression:"['avatar']"}]})],1)],1)],1)},l=[],o=t("c24f"),u={name:"CreateUser",data:function(){return{userId:null,visible:!1,isAdd:!0,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this)}},filters:{titleFilter:function(e){var a={true:"新增",false:"编辑"};return a[e]}},methods:{init:function(e){var a=this;this.isAdd=!0,this.resetForm(),this.visible=!0,0!==e.length&&(this.userId=e,this.isAdd=!1,Object(o["e"])(e).then(function(e){"SUCCEED"===e.status&&a.$nextTick(function(){a.form.setFieldsValue({username:e.result.username,nickname:e.result.nickname,email:e.result.email,mobile:e.result.mobile,avatar:e.result.avatar})})}))},handleOk:function(){var e=this;this.form.validateFields(function(a,t){a||(e.isAdd?Object(o["a"])(t).then(function(a){"SUCCEED"===a.status&&(e.$message.success("操作成功!"),e.visible=!1,e.$emit("on-refresh"))}):Object(o["j"])(Object.assign({userId:e.userId},t)).then(function(a){"SUCCEED"===a.status&&(e.$message.success("操作成功!"),e.visible=!1,e.$emit("on-refresh"))}))})},resetForm:function(){this.form.resetFields()}}},d=u,c=t("2877"),m=Object(c["a"])(d,i,l,!1,null,null,null),p=m.exports,f={name:"TarocoUsers",components:{STable:n["c"],CreateUser:p},data:function(){return{columns:[{title:"用户ID",dataIndex:"userId"},{title:"用户姓名",dataIndex:"username"},{title:"用户昵称",dataIndex:"nickname"},{title:"手机号",dataIndex:"mobile"},{title:"邮箱",dataIndex:"email"},{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return console.log("loadData:".concat(e)),Object(o["d"])({size:e.pageSize,current:e.pageNo}).then(function(e){return console.log(e),e.result})}}},methods:{handleAdd:function(){this.$refs.CreateUser.init()},handleEdit:function(e){this.$refs.CreateUser.init(e.userId)},handleDelete:function(e){var a=this;this.$confirm({title:"操作确认",content:"是否确认删除用户: "+e.userName+" ?",onOk:function(){Object(o["b"])(e.userId).then(function(e){"SUCCEED"===e.status&&(a.$message.success("操作成功!"),a.refreshList())})}})},refreshList:function(){this.$refs.table.refresh(!0)}}},b=f,h=Object(c["a"])(b,r,s,!1,null,null,null);a["default"]=h.exports}}]);